\documentclass[$if(fontsize)$$fontsize$,$endif$$if(lang)$$lang$,$endif$$if(papersize)$$papersize$,$endif$$for(classoption)$$classoption$$sep$,$endfor$]{$documentclass$}

% margins
\usepackage[top=4cm, bottom=4cm, left=4cm, right=4cm]{geometry}

% ams
\usepackage{amssymb,amsmath}

% fontawesome to phone symbol and more
\usepackage{fontawesome}

% utf8 encoding
\usepackage[utf8]{inputenc}

% font selection (see http://www.tug.dk/FontCatalogue/ for available fonts)
% some fonts would need extra tweaking
$if(font)$
\usepackage[T1]{fontenc}
\usepackage[default]{$font$}
$endif$

% graphix
\usepackage{graphicx}
\setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio}

% booktabs
\usepackage{booktabs}

% color
\usepackage{color}
\definecolor{sectiongray}{RGB}{108,122,137}
\definecolor{linkscolor}{RGB}{92,151,191}

% url
\usepackage{url}
% same font for urls links
\urlstyle{same}

% hyperref
\usepackage[hidelinks]{hyperref}
\hypersetup{colorlinks = true,
            urlcolor = linkscolor}

% units.
\usepackage{units}

% pandoc syntax highlighting
$if(highlighting-macros)$
$highlighting-macros$
$endif$

% longtable
$if(tables)$
\usepackage{longtable,booktabs}
$endif$

% multiplecol
\usepackage{multicol}

% lipsum
\usepackage{lipsum}

% strikeout
\usepackage[normalem]{ulem}

% morefloats
\usepackage{morefloats}

% tightlist macro required by pandoc >= 1.14
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% indentation
\setlength{\parindent}{0pt}


% section and subsections formatting with color and titlesec package
\usepackage{titlesec}

% section
\titleformat{\section}[block]
{\Large\vspace{12pt}\bfseries}
{\thesection}{.2em}{}

% subsection
\titleformat{\subsection}[leftmargin]
{\normalfont\vspace{12pt}
\titleline{\color{sectiongray}\rule{5cm}{1.5pt}}
\vspace{6pt}%
\sffamily\bfseries\filleft}
{\thesubsection}{.5em}{\color{sectiongray}}

% subsection spacing
\titlespacing*{\subsection}
{2.5cm}{*2.2}{0.5cm}

% numbered sections
$if(numbersections)$
\setcounter{secnumdepth}{5}
$else$
\setcounter{secnumdepth}{0}
$endif$

% header and foot with fancyhdr
\usepackage{fancyhdr}

\pagestyle{fancy}

\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}
\renewcommand{\headrule}{{\color{sectiongray}%
\hrule width 1.2\headwidth height \headrulewidth \vskip-\headrulewidth}}
\renewcommand{\footrule}{{\color{sectiongray}%
\vskip-\footruleskip\vskip-\footrulewidth
\hrule width 1.2\headwidth height \footrulewidth\vskip\footruleskip}}

\fancyhf{}
\fancyhfoffset[l]{-8.5cm}
\fancyhfoffset[r]{0.7cm}
\rhead{\small $if(author)$\textcolor{sectiongray}{$author$, }$endif$%
       $if(courtesy)$\textcolor{sectiongray}{$courtesy$}$endif$\\%
       $if(date)$\textcolor{sectiongray}{$date$}$endif$}
\rfoot{\small \textcolor{sectiongray}{\thepage}}



% header includes
$for(header-includes)$
$header-includes$
$endfor$

\begin{document}

% no header in first page
\thispagestyle{empty}

% / author / date / personal data
\section{$author$$if(courtesy)$, $courtesy$$endif$}\label{author}

$if(date)$
\textcolor{sectiongray}{\faCalendar} \(~\) $date$\\
$endif$
$if(address)$
\textcolor{sectiongray}{\faMap} \(~\) $address$\\
$endif$
$if(phone)$
\textcolor{sectiongray}{\faPhone} \(~\) $phone$\\
$endif$
$if(email)$
\textcolor{sectiongray}{\faEnvelope} \(~\) $email$\\
$endif$
$if(github)$
\textcolor{sectiongray}{\faGithub} \(~\) $github$\\
$endif$
$for(www)$
\textcolor{sectiongray}{\faGlobe} \(~\) $www$\\
$endfor$

$for(include-before)$
$include-before$
$endfor$

$body$

$for(include-after)$
$include-after$
$endfor$

\end{document}
